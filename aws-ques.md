# Сравнительная таблица брокеров сообщений в AWS

| Сервис | Модель доставки | Порядок сообщений | Гарантия доставки | Гарантия одного получателя | Транспорт / протокол | Короткие замечания |
|---------|------------------|-------------------|-------------------|-----------------------------|----------------------|--------------------|
| **SQS — Standard queue** | Pull (consumer опрашивает) — но возможен push через Lambda trigger | Best-effort (порядок **не гарантируется**) | **At-least-once** (могут быть дубликаты) | Нет (несколько консьюмеров могут получить одно сообщение, если первый не удалил) | HTTPS REST API (SDK делает HTTPS) | Максимальная пропускная способность, подходит для high-throughput; требуется идемпотентная обработка. |
| **SQS — FIFO queue** | Pull (или Lambda trigger) | **Гарантирован порядок** внутри MessageGroupId (FIFO) | Дедупликация — **exactly-once (dedup/queue)** при соблюдении условий | Можно добиться поведения «один активный обработчик в группе» через MessageGroupId | HTTPS REST API | Низкий throughput по сравнению с Standard, но гарантии порядка и дедупликации. |
| **SNS (Simple Notification Service)** | **Push** (публикует в HTTP/S, Lambda, SQS, SMS, email и т.д.) | Нет гарантий порядка (обычно unordered) | At-least-once (повторные попытки доставки; можно настроить DLQ для подписки) | Нет (fan-out: один топик → много подписчиков) | HTTPS (для HTTP/S endpoints), собственные протоколы для push | Отлично для fan-out/уведомлений; не брокер в классическом смысле. |
| **Amazon MQ (ActiveMQ / RabbitMQ)** | Push/pull по классическим брокерным протоколам (broker управляет доставкой) | Может гарантировать порядок (зависит от движка/конфигурации: очереди ActiveMQ/RabbitMQ) | Зависит от брокера и конфигурации (обычно supports persistent delivery, acknowledgements) | Да: можно настроить point-to-point (queue) — один потребитель получает сообщение | AMQP, STOMP, MQTT, OpenWire, WebSocket (зависит от движка) | Managed classic-broker — близко к «традиционному» RabbitMQ/ActiveMQ с поддержкой RPC patterns и строгими гарантиями. |
| **Amazon MSK (Managed Kafka)** | Pull (consumers poll brokers using Kafka protocol) | Порядок гарантируется **в пределах partition** (ordering per partition) | At-least-once по умолчанию; можно добиться Exactly-Once semantics с Kafka EOS (требует конфигурации/producers/transactions) | Можно организовать «один активный консюмёр в consumer group per partition» — контролируемое параллельное потребление | Kafka native protocol (TCP) | Подходит для стриминга с высокой пропускной способностью, хранением истории, сложной обработки; требует управления семантикой consumer groups. |
| **Kinesis Data Streams** | Pull (consumers читают из shard) | Гарантированный порядок внутри **shard** | At-least-once; ordering per shard; можно replay (переиграть) | Не «один получатель» по умолчанию — несколько консьюмеров могут читать один shard, но обычно один consumer group обрабатывает | HTTPS API (AWS SDK), внутри — managed streaming | Отлично для потоковой телеметрии/логов/стриминга; порядок внутри shard; обеспечивает retention и replay. |
| **EventBridge** | Push (EventBridge доставляет события в target — Lambda, SQS, HTTP и т.д.) | **Не гарантирует** порядок доставки | At-least-once (доставляет с retry/проверками) | Нет (fan-out на разные targets) | HTTPS API / AWS internal transport | Подходит как event-bus/ESB для событийного маршрута и фильтрации; не для строгого порядка. |
